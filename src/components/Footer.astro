---
import config from '../data/config.json';

const currentYear = new Date().getFullYear();

const aboutLinks = [
  { label: 'About Health Insurance Renew', url: '/about' },
  { label: 'Editorial Policy', url: '/editorial-policy' },
  { label: 'How We Get Paid', url: '/how-we-get-paid' },
  { label: 'Licensing Disclosures', url: '/licensing' },
  { label: 'Privacy Policy', url: '/privacy' },
  { label: 'Terms', url: '/terms' },
  { label: 'Contact', url: '/contact' },
];

const guideLinks = [
  { label: '2026 ACA Income Limits', url: '/aca-income-guide-2026' },
  { label: 'What Income Counts (MAGI)', url: '/tools/what-income-counts' },
  { label: 'Special Enrollment Periods', url: '/guides/special-enrollment-period' },
  { label: 'Employer Affordability Test', url: '/employer-coverage-unaffordable-2026' },
  { label: 'Self-Employed ACA Guide', url: '/self-employed-health-insurance-2026' },
  { label: 'Early Retirement ACA Strategy', url: '/early-retirement-health-insurance-2026' },
  { label: 'Open Enrollment 2026', url: '/guides/open-enrollment-2026' },
];

const stateLinks = config.licensedStates.map((s: { name: string; slug: string }) => ({
  label: s.name,
  url: `/states/${s.slug}`,
}));
---
<footer class="bg-white border-t border-slate-200 mt-auto">
  <div class="max-w-[1200px] mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="hidden lg:grid lg:grid-cols-4 gap-10 mb-10">
      <div>
        <h3 class="text-[#0B1F3B] font-semibold text-sm uppercase tracking-wider mb-4">About</h3>
        <ul class="space-y-2.5">
          {aboutLinks.map((link) => (
            <li><a href={link.url} class="text-sm text-slate-600 hover:text-[#0B1F3B] transition-colors">{link.label}</a></li>
          ))}
        </ul>
      </div>

      <div>
        <h3 class="text-[#0B1F3B] font-semibold text-sm uppercase tracking-wider mb-4">ACA Guides</h3>
        <ul class="space-y-2.5">
          {guideLinks.map((link) => (
            <li><a href={link.url} class="text-sm text-slate-600 hover:text-[#0B1F3B] transition-colors">{link.label}</a></li>
          ))}
        </ul>
      </div>

      <div>
        <h3 class="text-[#0B1F3B] font-semibold text-sm uppercase tracking-wider mb-4">Licensed States</h3>
        <ul class="space-y-2">
          {stateLinks.map((link: { label: string; url: string }) => (
            <li><a href={link.url} class="text-sm text-slate-600 hover:text-[#0B1F3B] transition-colors">{link.label}</a></li>
          ))}
        </ul>
      </div>

      <div>
        <h3 class="text-[#0B1F3B] font-semibold text-sm uppercase tracking-wider mb-4">Trust & Compliance</h3>
        <div class="space-y-4">
          <div>
            <p class="text-sm font-semibold text-[#0B1F3B]">Licensed U.S. Health Insurance Agent</p>
            <p class="text-sm text-slate-600 mt-1">NPN: 7578729</p>
          </div>
          <div>
            <p class="text-sm font-medium text-slate-700">CMS Marketplace Certified</p>
            <p class="text-xs text-slate-500 mt-1">Recognized for enrollment excellence during the 2023 Open Enrollment Period.</p>
          </div>
          <div>
            <p class="text-sm font-medium text-slate-700">Secure & Private Consultations</p>
            <p class="text-xs text-slate-500 mt-1">Your information is handled with care and never sold to third parties.</p>
          </div>
          <div>
            <p class="text-xs text-slate-500 leading-relaxed">
              Serving clients in {config.licensedStates.length} states: {config.licensedStates.map((s: { abbr: string }) => s.abbr).join(', ')}.
            </p>
          </div>
          <ul class="space-y-2 pt-2 border-t border-slate-100">
            <li><a href="/circle-of-champions" class="text-sm text-slate-600 hover:text-[#0B1F3B] transition-colors">Circle of Champions Recognition</a></li>
            <li><a href="/data-methodology" class="text-sm text-slate-600 hover:text-[#0B1F3B] transition-colors">Data & Methodology</a></li>
          </ul>
        </div>
      </div>
    </div>

    <div class="lg:hidden space-y-0 mb-8" id="footer-accordion">
      <div class="border-b border-slate-100">
        <button class="footer-accordion-btn w-full flex items-center justify-between py-4 text-left" aria-expanded="false">
          <span class="text-[#0B1F3B] font-semibold text-sm uppercase tracking-wider">About</span>
          <svg class="footer-chevron w-4 h-4 text-slate-400 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
        </button>
        <div class="footer-accordion-panel hidden pb-4">
          <ul class="space-y-2.5">
            {aboutLinks.map((link) => (
              <li><a href={link.url} class="text-sm text-slate-600 hover:text-[#0B1F3B] transition-colors">{link.label}</a></li>
            ))}
          </ul>
        </div>
      </div>

      <div class="border-b border-slate-100">
        <button class="footer-accordion-btn w-full flex items-center justify-between py-4 text-left" aria-expanded="false">
          <span class="text-[#0B1F3B] font-semibold text-sm uppercase tracking-wider">ACA Guides</span>
          <svg class="footer-chevron w-4 h-4 text-slate-400 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
        </button>
        <div class="footer-accordion-panel hidden pb-4">
          <ul class="space-y-2.5">
            {guideLinks.map((link) => (
              <li><a href={link.url} class="text-sm text-slate-600 hover:text-[#0B1F3B] transition-colors">{link.label}</a></li>
            ))}
          </ul>
        </div>
      </div>

      <div class="border-b border-slate-100">
        <button class="footer-accordion-btn w-full flex items-center justify-between py-4 text-left" aria-expanded="false">
          <span class="text-[#0B1F3B] font-semibold text-sm uppercase tracking-wider">Licensed States</span>
          <svg class="footer-chevron w-4 h-4 text-slate-400 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
        </button>
        <div class="footer-accordion-panel hidden pb-4">
          <ul class="space-y-2">
            {stateLinks.map((link: { label: string; url: string }) => (
              <li><a href={link.url} class="text-sm text-slate-600 hover:text-[#0B1F3B] transition-colors">{link.label}</a></li>
            ))}
          </ul>
        </div>
      </div>

      <div class="border-b border-slate-100">
        <button class="footer-accordion-btn w-full flex items-center justify-between py-4 text-left" aria-expanded="false">
          <span class="text-[#0B1F3B] font-semibold text-sm uppercase tracking-wider">Trust & Compliance</span>
          <svg class="footer-chevron w-4 h-4 text-slate-400 transition-transform duration-200" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"/></svg>
        </button>
        <div class="footer-accordion-panel hidden pb-4">
          <div class="space-y-3">
            <p class="text-sm font-semibold text-[#0B1F3B]">Licensed U.S. Health Insurance Agent</p>
            <p class="text-sm text-slate-600">NPN: 7578729</p>
            <p class="text-xs text-slate-500">CMS Marketplace Certified. Recognized for enrollment excellence during the 2023 Open Enrollment Period.</p>
            <p class="text-xs text-slate-500">Serving clients in {config.licensedStates.length} states.</p>
            <a href="/circle-of-champions" class="block text-sm text-slate-600 hover:text-[#0B1F3B] transition-colors">Circle of Champions Recognition</a>
            <a href="/data-methodology" class="block text-sm text-slate-600 hover:text-[#0B1F3B] transition-colors">Data & Methodology</a>
          </div>
        </div>
      </div>
    </div>

    <div class="border-t border-slate-200 pt-8">
      <div class="bg-slate-50 rounded-xl border border-slate-200 p-4 mb-6">
        <p class="text-xs text-slate-500 leading-relaxed">
          <strong class="text-slate-600">Important:</strong> {config.siteName} is not a government website and is not affiliated with Healthcare.gov or any government agency. This website is operated by a licensed health insurance agent (NPN: 7578729) and provides educational information about health insurance options. We may receive compensation from insurance carriers when you enroll through a licensed agent. Information on this site is for educational purposes only and does not constitute legal, tax, or benefits advice.
        </p>
      </div>
      <p class="text-xs text-slate-400 text-center">
        &copy; {currentYear} {config.siteName}. All rights reserved.
      </p>
    </div>
  </div>
</footer>

<script>
  document.querySelectorAll('.footer-accordion-btn').forEach((btn) => {
    btn.addEventListener('click', () => {
      const panel = btn.nextElementSibling;
      const chevron = btn.querySelector('.footer-chevron');
      const isOpen = btn.getAttribute('aria-expanded') === 'true';

      document.querySelectorAll('.footer-accordion-btn').forEach((otherBtn) => {
        if (otherBtn !== btn) {
          otherBtn.setAttribute('aria-expanded', 'false');
          otherBtn.nextElementSibling?.classList.add('hidden');
          otherBtn.querySelector('.footer-chevron')?.classList.remove('rotate-180');
        }
      });

      btn.setAttribute('aria-expanded', String(!isOpen));
      panel?.classList.toggle('hidden');
      chevron?.classList.toggle('rotate-180');
    });
  });
</script>
